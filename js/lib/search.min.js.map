{"version":3,"sources":["webpack:///webpack/bootstrap 602cba9b077a5bbf3c34?8967*****","webpack:///./js/src/search.js","webpack:///./js/components/search-test.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA;AACA;;AAEA;AACA;;AAEA,EAAC;;;;;;;;;;;ACND;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,0BAAyB;AACzB;;AAEA,sBAAqB,oBAAoB,OAAO;AAChD;;AAEA;AACA;AACA;AACA,2DAA0D;AAC1D;AACA;AACA,4BAA2B;AAC3B;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,OAAM;AACN;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,iBAAiB;AACpC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,0BAAyB,YAAY;AACrC;AACA,wBAAuB,YAAY;AACnC,IAAG;;AAEH,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,0CAAyC;AACzC;;AAEA,+CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC","file":"search.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 602cba9b077a5bbf3c34","(function(exports) {\n  'use strict';\n\n  // require('./../components/search-results.js');\n  require('./../components/search-test.js');\n\n})(window);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/src/search.js\n// module id = 0\n// module chunks = 6","(function() {\n  function displaySearchResults(results, store) {\n    // console.log(results, store)\n    var searchResults = document.querySelector('.search-results-container .search-results-container');\n    searchResults.innerHTML = ''\n\n    // setTimeout(function(){\n\n\n    if (results.length) { // Are there any results?\n      var appendString = '';\n\n      for (var i = 0; i < results.length; i++) {  // Iterate over the results\n        var item = store[results[i].ref];\n\n        var tags = (item.tag || [])\n          .map(function(tag) {\n            return (\n              '<span class=\"search-result-list-tag\">&nbsp;' +\n                '<a href=\"' + \"/search-test/?query=\" + encodeURIComponent(tag) + '\" title=\"Search for ' + tag + '\">' +\n                  tag +\n                '</a>&nbsp;' +\n              '</span>'\n            );\n          });\n        appendString += '<article class=\"search-result-list\">' +\n                          '<h1><a href=\"' + item.url + '\" target=\"_blank\">' +\n                            item.title +\n                          '</a></h1>' +\n                          '<p>' + item.description + '</p>' +\n                          '<p>Tagged&nbsp;/' + tags.join('') + '</p>' +\n                        '</article>'\n      }\n      searchResults.innerHTML = appendString;\n    } else {\n      $('.search-no-results').show();\n      // searchResults.innerHTML = '<li>No results found</li>';\n    }\n  // }, 10)\n  }\n\n  function updateContext(results) {\n\n      console.log(results.length)\n      $('.search-results-count').val(results.length);\n      document.querySelector('.search-results-count').innerHTML = results.length\n  }\n\n  function getQueryVariable(variable) {\n    var query = window.location.search.substring(1);\n    var vars = query.split('&');\n\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split('=');\n\n      if (pair[0] === variable) {\n        return decodeURIComponent(pair[1].replace(/\\+/g, '%20'));\n      }\n    }\n  }\n\n  function updateQueryStringParameter(uri, key, value) {\n    var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n    var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\n    if (uri.match(re)) {\n      return uri.replace(re, '$1' + key + \"=\" + value + '$2');\n    }\n    else {\n      return uri + separator + key + \"=\" + value;\n    }\n  }\n\n  window.updateQueryStringParameter = updateQueryStringParameter;\n\n  // Initalize lunr with the fields it will be searching on. I've given title\n  // a boost of 10 to indicate matches on this field are more important.\n  var idx = lunr(function () {\n    this.field('id');\n    this.field('title', { boost: 10 });\n    this.field('description');\n    this.field('tag', { boost: 10 });\n  });\n\n  for (var key in window.store) { // Add the data to lunr\n    idx.add({\n      'id': key,\n      'title': window.store[key].title,\n      'description': window.store[key].description,\n      'tag': window.store[key].tag,\n    });\n\n    window.idx = idx\n    var results = idx.search(searchTerm); // Get lunr to perform a search\n  }\n\n  displaySearchResults(results, window.store); // We'll write this in the next section\n  updateContext(results);\n\n  function searchIndex(searchTerm) {\n    $('.search-no-results').hide();\n    var results = idx.search(searchTerm);\n    displaySearchResults(results, window.store);\n    // window.location.href = updateQueryStringParameter(window.location.href, 'query', searchTerm);\n    document.querySelector('.search-box').setAttribute(\"value\", searchTerm);\n    updateContext(results);\n  }\n\n\n  var searchTerm = getQueryVariable('query') || document.querySelector('.search-box').value;\n\n  if (searchTerm.length > 0) {\n    searchIndex(searchTerm);\n  }\n\n  $('.search-box').on('keyup', function() {\n    var searchValue = document.querySelector('.search-box').value;\n    searchIndex(searchValue);\n    $('.search-string').val(searchValue);\n  })\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/components/search-test.js\n// module id = 26\n// module chunks = 6"],"sourceRoot":""}