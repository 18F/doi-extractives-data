{% macro table(values, columns, caption='') %}
  {% set values = values|sort('Year')|sort('Commodity') %}
  <table>
    <caption>{{ caption }}</caption>
    <thead>
      <tr>
      {% for column in columns %}
        <th>{{ column }}</th>
      {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in values %}
      <tr>
      {% for column in columns %}
        <td>{{ row[column] }}</td>
      {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endmacro %}

{% macro location_selector(locations=[], prefix='/locations/', id=null, value=null) %}
  <select id="{{ id }}" onchange="if (this.value) window.location = '{{ prefix }}' + this.value">
    <option value="">States and offshore areas</option>
    <optgroup label="States">
      {% for state in locations.onshore %}
      <option
        {% if (value == 'onshore/' + state.abbr) %}selected{% endif %}
        value="onshore/{{ state.abbr }}">{{ state.name }}</option>
      {% endfor %}
    </optgroup>
    <optgroup label="Offshore Areas">
      {% for area in locations.offshore %}
      <option
        {% if (value == 'offshore/' + area.id) %}selected{% endif %}
        value="offshore/{{ area.id }}">{{ area.name }}</option>
      {% endfor %}
    </optgroup>
  </select>

{% endmacro %}
